# üõ†Ô∏è –ü–û–®–ê–ì–û–í–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ
## telegram-routes ‚Äî –ø–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π

> –°–ª–µ–¥—É–π —Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É. –ö–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω.
> –ù–µ –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É –Ω–µ –∑–∞–≤–µ—Ä—à–∏–≤ —Ç–µ–∫—É—â–∏–π.

---

# –ß–ê–°–¢–¨ 1: SUPABASE DASHBOARD
### (–æ—Ç–∫—Ä—ã—Ç—å –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–µ: supabase.com/dashboard)

---

## üîë –®–ê–ì 1 ‚Äî –°–±—Ä–æ—Å–∏—Ç—å —É—Ç—ë–∫—à–∏–π –∫–ª—é—á (–°–î–ï–õ–ê–¢–¨ –ü–ï–†–í–´–ú)

1. –û—Ç–∫—Ä–æ–π **supabase.com/dashboard**
2. –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç **telegram-routes**
3. –°–ª–µ–≤–∞ –≤ –º–µ–Ω—é –Ω–∞–∂–º–∏ **Settings** (—à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∞ –≤–Ω–∏–∑—É)
4. –ù–∞–∂–º–∏ **API**
5. –ù–∞–π–¥–∏ —Å–µ–∫—Ü–∏—é **Project API keys**
6. –°–ø—Ä–∞–≤–∞ –æ—Ç **anon public** –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **Reveal** ‚Üí –ø–æ—Ç–æ–º **Regenerate**
7. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ ‚Äî –Ω–∞–∂–º–∏ **Regenerate key**
8. **–°–ö–û–ü–ò–†–£–ô –ù–û–í–´–ô –ö–õ–Æ–ß** ‚Äî –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –®–∞–≥–µ 11

> ‚ö†Ô∏è –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
> –ú—ã –≤—Å—ë –∏—Å–ø—Ä–∞–≤–∏–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–∞—Ö.

---

## üóÑÔ∏è –®–ê–ì 2 ‚Äî –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É bookings

–≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞—è–≤–∫–∏ –≤–æ–¥–∏—Ç–µ–ª—è–º–∏.

1. –í Supabase —Å–ª–µ–≤–∞ –Ω–∞–∂–º–∏ **SQL Editor**
2. –ù–∞–∂–º–∏ **+ New query**
3. –í—Å—Ç–∞–≤—å —ç—Ç–æ—Ç SQL –∏ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **Run** (–∏–ª–∏ Ctrl+Enter):

```sql
ALTER TABLE bookings
  ADD COLUMN IF NOT EXISTS taken_by TEXT,
  ADD COLUMN IF NOT EXISTS taken_by_telegram_id TEXT;
```

4. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `Success. No rows returned`

---

## üîê –®–ê–ì 3 ‚Äî –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Edge Functions

### –°–µ–∫—Ä–µ—Ç –¥–ª—è smart-service (–∑–∞—â–∏—Ç–∞ webhook):

1. –°–ª–µ–≤–∞ –Ω–∞–∂–º–∏ **Edge Functions**
2. –ù–∞–∂–º–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é **smart-service**
3. –ù–∞–∂–º–∏ –≤–∫–ª–∞–¥–∫—É **Secrets**  
4. –ù–∞–∂–º–∏ **Add new secret**
5. –ó–∞–ø–æ–ª–Ω–∏:
   - Name: `WEBHOOK_SECRET`
   - Value: –ø—Ä–∏–¥—É–º–∞–π –¥–ª–∏–Ω–Ω—É—é —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä: `myTaxi95superSecret2024xK9mP`
     *(–Ω–∞–ø–∏—à–∏ —Å—é–¥–∞ —á—Ç–æ –ø—Ä–∏–¥—É–º–∞–ª ‚Äî –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –®–∞–≥–µ 14)*
6. –ù–∞–∂–º–∏ **Save**

7. –¢–∞–º –∂–µ –¥–æ–±–∞–≤—å –µ—â—ë –æ–¥–∏–Ω —Å–µ–∫—Ä–µ—Ç:
   - Name: `MINI_APP_URL`
   - Value: `https://telegram-routes.vercel.app/`
8. –ù–∞–∂–º–∏ **Save**

### –ü–æ–≤—Ç–æ—Ä–∏ —Ç–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è send-notification:
9. –ù–∞–∂–º–∏ **‚Üê –Ω–∞–∑–∞–¥** ‚Üí –≤—ã–±–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏—é **send-notification**
10. –ù–∞–∂–º–∏ **Secrets** ‚Üí –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–∞–º —É–∂–µ –µ—Å—Ç—å `BOT_TOKEN`, `OWNER_CHAT_ID`, `DRIVER_GROUP_ID`
    (–µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤—å –∏—Ö —Å–Ω–æ–≤–∞)
11. –ù–∏—á–µ–≥–æ –Ω–æ–≤–æ–≥–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã Supabase

---

# –ß–ê–°–¢–¨ 2: GITHUB
### (–æ—Ç–∫—Ä—ã—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π telegram-routes –Ω–∞ github.com)

---

## üìÅ –®–ê–ì 4 ‚Äî –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª send-notification/index.ts

1. –û—Ç–∫—Ä–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É: `supabase` ‚Üí `functions` ‚Üí `send-notification`
3. –ù–∞–∂–º–∏ –Ω–∞ —Ñ–∞–π–ª `index.ts`
4. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **Edit** (–∏–∫–æ–Ω–∫–∞ –∫–∞—Ä–∞–Ω–¥–∞—à–∞ ‚úèÔ∏è)
5. –í—ã–¥–µ–ª–∏ **–≤–µ—Å—å —Ç–µ–∫—Å—Ç** (Ctrl+A –∏–ª–∏ ‚åò+A) –∏ **—É–¥–∞–ª–∏**
6. –í—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `send-notification/index.ts` –∏–∑ –∞—Ä—Ö–∏–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
7. –í–Ω–∏–∑—É –Ω–∞–∂–º–∏ **Commit changes**
8. –ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ: `fix: security improvements in send-notification`
9. –ù–∞–∂–º–∏ **Commit changes**

---

## üìÅ –®–ê–ì 5 ‚Äî –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª smart-service/index.ts

1. –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–π–¥–∏: `supabase` ‚Üí `functions` ‚Üí `smart-service`
2. –ù–∞–∂–º–∏ –Ω–∞ —Ñ–∞–π–ª `index.ts`
3. –ù–∞–∂–º–∏ **Edit** (–∫–∞—Ä–∞–Ω–¥–∞—à ‚úèÔ∏è)
4. –í—ã–¥–µ–ª–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç ‚Üí —É–¥–∞–ª–∏
5. –í—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `smart-service/index.ts` –∏–∑ –∞—Ä—Ö–∏–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
6. **Commit changes** ‚Üí `fix: webhook security + double-booking protection`

---

## üìÅ –®–ê–ì 6 ‚Äî –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª src/supabase.js

1. –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–π–¥–∏: `src` ‚Üí `supabase.js`
2. –ù–∞–∂–º–∏ **Edit**
3. –í—ã–¥–µ–ª–∏ –≤—Å—ë ‚Üí —É–¥–∞–ª–∏
4. –í—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `src/supabase.js` –∏–∑ –∞—Ä—Ö–∏–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
5. **Commit changes** ‚Üí `fix: booking ID in notifications + spam protection`

---

## üìÅ –®–ê–ì 7 ‚Äî –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª src/App.jsx

1. –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: `src` ‚Üí `App.jsx`
2. –ù–∞–∂–º–∏ **Edit**
3. –í—ã–¥–µ–ª–∏ –≤—Å—ë ‚Üí —É–¥–∞–ª–∏
4. –í—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `src/App.jsx` –∏–∑ –∞—Ä—Ö–∏–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
5. **Commit changes** ‚Üí `fix: replace alert with inline error + cache TTL 30min`

---

## üìÅ –®–ê–ì 8 ‚Äî –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª src/components/BookingForm.jsx

1. –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: `src` ‚Üí `components` ‚Üí `BookingForm.jsx`
2. –ù–∞–∂–º–∏ **Edit**
3. –í—ã–¥–µ–ª–∏ –≤—Å—ë ‚Üí —É–¥–∞–ª–∏
4. –í—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `src/components/BookingForm.jsx` –∏–∑ –∞—Ä—Ö–∏–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
5. **Commit changes** ‚Üí `fix: show booking errors inline instead of alert`

---

## üîë –®–ê–ì 9 ‚Äî –û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á Supabase –≤ Vercel

–¢–∞–∫ –∫–∞–∫ –º—ã —Å–±—Ä–æ—Å–∏–ª–∏ –∫–ª—é—á –≤ –®–∞–≥–µ 1, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –µ–≥–æ –≤ Vercel.

1. –û—Ç–∫—Ä–æ–π **vercel.com/dashboard**
2. –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç **telegram-routes**
3. –ù–∞–∂–º–∏ **Settings** ‚Üí **Environment Variables**
4. –ù–∞–π–¥–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `VITE_SUPABASE_ANON_KEY`
5. –ù–∞–∂–º–∏ **Edit**
6. –í—Å—Ç–∞–≤—å –Ω–æ–≤—ã–π –∫–ª—é—á (–∫–æ—Ç–æ—Ä—ã–π —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –≤ –®–∞–≥–µ 1)
7. –ù–∞–∂–º–∏ **Save**
8. –ù–∞–π–¥–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `VITE_SUPABASE_URL`  
   ‚Äî –æ–Ω–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, –æ—Å—Ç–∞–≤—å –∫–∞–∫ –µ—Å—Ç—å

---

# –ß–ê–°–¢–¨ 3: –ü–ï–†–ï–î–ï–ü–õ–û–ô

---

## üöÄ –®–ê–ì 10 ‚Äî –ü–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Vercel

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ GitHub, Vercel –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∞—Ç—å –¥–µ–ø–ª–æ–π.

1. –û—Ç–∫—Ä–æ–π **vercel.com/dashboard** ‚Üí —Ç–≤–æ–π –ø—Ä–æ–µ–∫—Ç
2. –ù–∞–∂–º–∏ –≤–∫–ª–∞–¥–∫—É **Deployments**
3. –ù–∞–π–¥–∏ —Å–∞–º—ã–π —Å–≤–µ–∂–∏–π –¥–µ–ø–ª–æ–π ‚Äî –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º **Building** –∏–ª–∏ **Ready**
4. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **Error** ‚Äî –Ω–∞–∂–º–∏ –Ω–∞ –¥–µ–ø–ª–æ–π –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏

–ï—Å–ª–∏ –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:
1. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **Redeploy** —Ä—è–¥–æ–º —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–µ–ø–ª–æ–µ–º
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏

---

## ‚öôÔ∏è –®–ê–ì 11 ‚Äî –ü–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å Edge Functions –≤ Supabase

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ GitHub –Ω—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ Supabase –≤—Ä—É—á–Ω—É—é.

**–ï—Å–ª–∏ —É —Ç–µ–±—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Supabase CLI** (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, —Ä–∞–∑ –¥–µ–ª–∞–µ—à—å —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω):
```bash
supabase functions deploy send-notification
supabase functions deploy smart-service
```

**–ï—Å–ª–∏ –Ω–µ—Ç CLI ‚Äî —á–µ—Ä–µ–∑ Supabase Dashboard:**
1. –û—Ç–∫—Ä–æ–π Supabase ‚Üí **Edge Functions**
2. –ù–∞–∂–º–∏ –Ω–∞ **send-notification**
3. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **Deploy** (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–∫–∞—è –∫–Ω–æ–ø–∫–∞)

> ‚ö†Ô∏è Supabase –æ–±—ã—á–Ω–æ –ù–ï –¥–µ–ø–ª–æ–∏—Ç Edge Functions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ GitHub.
> –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Supabase CLI –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä.
> 
> –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –Ω–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ):
> ```bash
> npm install -g supabase
> supabase login
> supabase link --project-ref cbvyjilzakreroguwhin
> supabase functions deploy send-notification
> supabase functions deploy smart-service
> ```

---

# –ß–ê–°–¢–¨ 4: –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø WEBHOOK

---

## ü§ñ –®–ê–ì 12 ‚Äî –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å webhook —Å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º

–≠—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π webhook –¥–ª—è –±–æ—Ç–∞ —Å –∑–∞—â–∏—Ç–æ–π.

–û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏ –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ (–∑–∞–º–µ–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —É–≥–ª–æ–≤—ã—Ö —Å–∫–æ–±–∫–∞—Ö):

```
https://api.telegram.org/bot<–¢–í–û–ô_BOT_TOKEN>/setWebhook?url=https://<–ü–†–û–ï–ö–¢>.supabase.co/functions/v1/smart-service&secret_token=<–¢–í–û–ô_WEBHOOK_SECRET>
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–∏:**
```
https://api.telegram.org/bot5555555555:AAHxxx.../setWebhook?url=https://cbvyjilzakreroguwhin.supabase.co/functions/v1/smart-service&secret_token=myTaxi95superSecret2024xK9mP
```

–ì–¥–µ –≤–∑—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è:
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
- URL –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî `cbvyjilzakreroguwhin.supabase.co` (–∏–∑ .env —Ñ–∞–π–ª–∞)
- `WEBHOOK_SECRET` ‚Äî —Ç–∞ —Å—Ç—Ä–æ–∫–∞ —á—Ç–æ –ø—Ä–∏–¥—É–º–∞–ª –≤ –®–∞–≥–µ 3

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Å—ã–ª–∫–µ –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å:
```json
{"ok":true,"result":true,"description":"Webhook was set"}
```

---

## ‚úÖ –®–ê–ì 13 ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook:
```
https://api.telegram.org/bot<–¢–í–û–ô_BOT_TOKEN>/getWebhookInfo
```
–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```json
{
  "ok": true,
  "result": {
    "url": "https://cbvyjilzakreroguwhin.supabase.co/functions/v1/smart-service",
    "has_custom_certificate": false,
    "pending_update_count": 0
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
1. –û—Ç–∫—Ä–æ–π Mini App —á–µ—Ä–µ–∑ –±–æ—Ç–∞
2. –í—ã–±–µ—Ä–∏ –º–∞—Ä—à—Ä—É—Ç
3. –û—Ç–ø—Ä–∞–≤—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É
4. –£–±–µ–¥–∏—Å—å —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –≤ Telegram
5. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "‚úÖ Olish" –≤ –≥—Ä—É–ø–ø–µ ‚Äî –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
6. –ü–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å –µ—â—ë —Ä–∞–∑ ‚Äî –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –æ—à–∏–±–∫–∞ "—É–∂–µ –≤–∑—è—Ç–∞"

---

# üìã –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢

| # | –î–µ–π—Å—Ç–≤–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 1 | –°–±—Ä–æ—Å Supabase anon key | ‚¨ú |
| 2 | SQL: –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏ taken_by | ‚¨ú |
| 3 | –î–æ–±–∞–≤–∏—Ç—å WEBHOOK_SECRET –≤ Supabase secrets | ‚¨ú |
| 4 | –ó–∞–º–µ–Ω–∏—Ç—å send-notification/index.ts | ‚¨ú |
| 5 | –ó–∞–º–µ–Ω–∏—Ç—å smart-service/index.ts | ‚¨ú |
| 6 | –ó–∞–º–µ–Ω–∏—Ç—å src/supabase.js | ‚¨ú |
| 7 | –ó–∞–º–µ–Ω–∏—Ç—å src/App.jsx | ‚¨ú |
| 8 | –ó–∞–º–µ–Ω–∏—Ç—å src/components/BookingForm.jsx | ‚¨ú |
| 9 | –û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á –≤ Vercel | ‚¨ú |
| 10 | Redeploy –Ω–∞ Vercel | ‚¨ú |
| 11 | Deploy Edge Functions –≤ Supabase | ‚¨ú |
| 12 | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å webhook —Å secret_token | ‚¨ú |
| 13 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚¨ú |

---

# ‚ùì –ß–ê–°–¢–´–ï –ü–†–û–ë–õ–ï–ú–´

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –∫–ª—é—á–∞:**
‚Üí –£–±–µ–¥–∏—Å—å —á—Ç–æ –æ–±–Ω–æ–≤–∏–ª –∫–ª—é—á –≤ Vercel (–®–∞–≥ 9) –∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏–ª (–®–∞–≥ 10)

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:**
‚Üí –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Edge Functions –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã (–®–∞–≥ 11)
‚Üí –û—Ç–∫—Ä–æ–π Supabase ‚Üí Edge Functions ‚Üí Logs ‚Äî —Ç–∞–º –≤–∏–¥–Ω—ã –æ—à–∏–±–∫–∏

**–ö–Ω–æ–ø–∫–∞ "Olish" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
‚Üí Webhook –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω (–®–∞–≥ 12)
‚Üí –ü—Ä–æ–≤–µ—Ä—å getWebhookInfo ‚Äî –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ç–≤–æ–π URL

**"Buyurtma allaqachon olingan" –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –Ω–∞–∂–∞—Ç–∏–∏:**
‚Üí SQL –∏–∑ –®–∞–≥–∞ 2 –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Äî –∫–æ–ª–æ–Ω–∫–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
